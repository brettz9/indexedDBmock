/*! indexedDBmock 07-11-2015 */
!function(a){function b(a){if("number"==typeof a&&!isNaN(a)||"string"==typeof a||a instanceof Date&&!isNaN(a))return!0;if(a instanceof Array){for(var c=a.length-1;c>=0;c--)if(!b(a[c]))return!1;return!0}return!1}var c=1,d={},e={open:function(a,b){var e,g=new v(null,null);for(var l in d)l===a&&(e=d[l]);e||(b||(b=1),e=new h(a),d[a]=e);var m=new i(e);return b&&m.version>b?setTimeout(function(){g.__error({name:"VersionError",message:"You are trying to open the database in a lower version ("+b+") than the current version of the database"},"VersionError")},c):b&&m.version<b?setTimeout(function(){function a(b,c,d,e){var h=c.version;d.connections.length>0&&d.connections[0]._connectionId!==c._connectionId&&(g.__blocked(null,c.version),setTimeout(a,10,b,c,d,e)),c.version=e,d.version=e,g.__upgradeneeded(c,new k(null,f.VERSIONCHANGE,new j(d,c)),e,h)}for(var d=0;d<e.connections.length;d++)e.connections[d]._connectionId!==m._connectionId&&"function"==typeof e.connections[d].onversionchange&&e.connections[d].onversionchange(new q("versionchange",{target:e.connections[d],newVersion:b,oldVersion:e.connections[d].version}));a(g,m,e,b),setTimeout(function(){g.transaction._aborted?g.__error({name:"AbortError",message:"The transaction was aborted."},8):(e.connections.push(m),g.__success(m))},c)},c):setTimeout(function(){e.connections.push(m),g.__success(m)},c),g},deleteDatabase:function(a){var b=new v(null,null);for(var e in d)e===a&&(d[e]=void 0,delete d[e]);return setTimeout(function(){b.__success()},c),b},cmp:function(a,b){if("number"==typeof a&&"number"==typeof b||"string"==typeof a&&"string"==typeof b||a instanceof Date&&b instanceof Date||a instanceof Array&&b instanceof Array){if(a instanceof Array&&b instanceof Array){a=a.sort(e.cmp),b=b.sort(e.cmp);for(var c=a.length<b.length?a.length:b.length,d=0;c>d;d++){if(a[d]<b[d])return-1;if(a[d]>b[d])return 1}return a.length<b.length?-1:a.length>b.length?1:0}return b>a?-1:a>b?1:0}return a instanceof Array?1:b instanceof Array?-1:"string"==typeof a?1:"string"==typeof b?-1:a instanceof Date?1:-1}},f={READONLY:"readonly",READWRITE:"readwrite",VERSIONCHANGE:"versionchange"},g={pending:"pending",done:"done"},h=function(a){this.name=a,this.version=0,this.objectStoreNames=[],this.objectStores=[],this.connections=[],this.transactions=[]},i=function(a){this.name=a.name,this.version=a.version,this.objectStoreNames=a.objectStoreNames,this._connectionId=a.connections.length,this._db=a},j=function(a,b){this.name=a.name,this.version=a.version,this.objectStoreNames=a.objectStoreNames,this._db=a,this._connection=b,this._objectStores=a.objectStores||[]},k=function(a,b,c){if(this.db=c,this.__active=!0,this._aborted=!1,this.__actions=[],b||(b=f.READONLY),b!==f.VERSIONCHANGE&&(!a||0===a.length))throw this.aborted=!0,this.__checkFinished(this),{name:"InvalidAccessError"};if(b!==f.READONLY&&b!==f.READWRITE&&b!==f.VERSIONCHANGE&&(b=f.READONLY),a)for(var d=0;d<a.length;d++){for(var e=!1,g=0;g<c.objectStoreNames.length;g++)c.objectStoreNames[g]===a[d]&&(e=!0);if(!e)throw this.aborted=!0,this.__checkFinished(this),{name:"NotFoundError"}}this.oncomplete=void 0,this.onerror=void 0,this.onabort=void 0,this.error=null,this.mode=b,this.objectStoreNames=a,this.db.transaction=this,this.__checkFinished(this)},l=function(a,b,c){this.name=a,this.keyPath=b?b.keyPath:void 0,this.autoIncrement=b?b.autoIncrement:void 0,this.indexNames=[],this.transaction=c,this._indexes=[],this.__data={},this.__keys=[],this.__actions=[],this.__latestKey=0},m=function(){},n=function(a,b,c,d){this.name=a,this.keyPath=b,this.multiEntry=c?c.multiEntry:void 0,this.unique=c?c.unique:void 0,this.objectStore=d,this.__data={}},o=function(a,b,c,d){this.lower=a,this.upper=b,this.lowerOpen=c?c:!1,this.upperOpen=d?d:!1},p=function(b,c){this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.bubbles=c.bubbles||!1,this.cancelBubble=c.bubbles&&c.cancelable||!1,this.cancelable=c.cancelable||!1,this.currentTarget=c.target,this.defaultPrevented=!1,this.detail=void 0,this.eventPhase=this.AT_TARGET,this.path=void 0,this.returnValue=c.returnValue,this.srcElement=c.target,this.target=c.target,this.timestamp=a.Date.now(),this.type=b},q=function(a,b){p.call(this,a,b),this.newVersion=b.newVersion,this.oldVersion=b.oldVersion},r=function(a){p.call(this,"success",{target:a,returnValue:!0})},s=function(a){p.call(this,"complete",{target:a,returnValue:!0})},t=function(a){p.call(this,"abort",{target:a,returnValue:!0})},u=function(a){p.call(this,"error",{target:a,returnValue:!0})},v=function(a,b){this.error=void 0,this.result=void 0,this.source=a,this.transaction=b,this.readyState=g.pending,this.onsuccess=null,this.onerror=null};p.prototype=function(){function a(){this.defaultPrevented=!0}function b(){this.cancelBubble=!0}return{preventDefault:a,stopImmediatePropagation:b}}(),q.prototype=p.prototype,r.prototype=p.prototype,s.prototype=p.prototype,t.prototype=p.prototype,u.prototype=p.prototype,i.prototype=function(){function a(){for(var a=0;a<this._db.connections.length;a++)this._db.connections[a]._connectionId===this._connectionId&&this._db.connections.splice(a,1)}function b(a,b){var c=new k(a,b,new j(this._db,this));return c}return{close:a,transaction:b}}(),j.prototype=function(){function a(){this._connection.close()}function b(){this._db.objectStores=this._objectStores,this._db.objectStoreNames=this.objectStoreNames}function c(a,b){return this._connection.transaction(a,b)}function d(a,b){if(this.transaction.mode!==f.VERSIONCHANGE)throw{name:"InvalidStateError"};if(b&&b.keyPath instanceof Array)for(var c=0;c<b.keyPath.length;c++)if(""===b.keyPath[c])throw this.transaction.abort(),{name:"InvalidAccessError"};var d=new l(a,b,this.transaction);return this._objectStores.push(d),this.objectStoreNames.push(a),d}function e(a){if(this.transaction.mode!==f.VERSIONCHANGE)throw{name:"InvalidStateError"};for(var b=!1,c=0;c<this.objectStoreNames.length;c++)this.objectStoreNames[c]===a&&(this.objectStoreNames.splice(c,1),b=!0);if(!b)throw{name:"NotFoundError"};for(var d=0;d<this._objectStores.length;d++)this._objectStores[d].name===a&&this._objectStores.splice(d,1)}return{close:a,transaction:c,createObjectStore:d,deleteObjectStore:e,__commit:b}}(),k.prototype=function(){function a(){for(var a=0;a<this.db._objectStores.length;a++){var b=(new Date).getTime();this.__actions.push(b),g(this,this.db._objectStores[a],b)}}function b(a){a._aborted||a.__commited||(a.__commited=!0,"readonly"!=this.mode&&a.db.__commit(),a.__active=!1,a.__complete())}function d(a){this._aborted=!0,setTimeout(function(b){b.error=a,"function"==typeof b.onabort&&b.onabort(new t(b))},c,this)}function e(a){var b=(new Date).getTime();if(this.__actions.push(b),this.mode!==f.VERSIONCHANGE){for(var c=!1,d=0;d<this.objectStoreNames.length;d++)this.objectStoreNames[d]===a&&(c=!0);if(!c)throw this.__actions.splice(this.__actions.indexOf(b),1),g(this,void 0,b),{name:"NotFoundError"}}for(var e=0;e<this.db._objectStores.length;e++)if(this.db._objectStores[e].name===a){var h=this.db._objectStores[e];return h.transaction=this,g(this,h,b),h}throw this.__actions.splice(this.__actions.indexOf(b),1),g(this,void 0,b),{name:"NotFoundError"}}function g(a,d,e){setTimeout(function(){d?d.__finished()?(a.__actions.splice(a.__actions.indexOf(e),1),0===a.__actions.length&&b(a)):g(a,d,e):0===a.__actions.length&&b(a)},c)}function h(a,b){this.error=a,this.errorCode=b,"function"==typeof this.onerror&&this.onerror(new u(this))}function i(){"function"==typeof this.oncomplete&&this.oncomplete(new s(this))}return{abort:d,objectStore:e,__commit:a,__checkFinished:g,__complete:i,__error:h}}(),l.prototype=function(){function a(a){return"Object"===a.constructor.name}function d(a){var b={};return a&&"[object Function]"===b.toString.call(a)}function g(a,b){for(var c=b.split("."),d=a,e=0;e<c.length;e++)d&&(d=d[c[e]]);return d}function h(a,b,c){for(var d=b.split("."),e=a,f=0;f<d.length;f++)f!=d.length-1?(e[d[f]]={},e=e[d[f]]):e[d[f]]=c;return e}function i(b){for(var c in b){if(d(b[c]))return!0;if(a(c)&&i(b[c]))return!0}return!1}function j(a){var b=(new Date).getTime(),d=this;d.__actions.push(b);var f,g=new v(this,this.transaction);if(a instanceof o||(a=o.only(a)),-1==d.transaction.db.objectStoreNames.indexOf(d.name)&&m(d,g,{name:"InvalidStateError"}),a.upper===a.lower)f=d.__data[a.lower];else for(var h=this.__keys.sort(e.cmp),i=0;i<h.length;i++)if(a.inRange(h[i])){f=d.__data[h[i]];break}return setTimeout(function(){g.__success(f),d.__actions.splice(d.__actions.indexOf(b),1)},c),g}function k(a,b){return q(this,a,b,!1)}function l(a,b){return q(this,a,b,!0)}function m(a,b,d){return setTimeout(function(){b.__error(d),a.transaction.__error(d),a.transaction.abort(d)},c),b}function p(a,b,c){throw c&&a.__actions.splice(a.__actions.indexOf(c),1),b}function q(d,e,j,k){var l=(new Date).getTime();d.__actions.push(l);var n=new v(this,this.transaction),o=j;if(-1==d.transaction.db.objectStoreNames.indexOf(d.name)&&p(d,{name:"InvalidStateError"},l),d.transaction.mode==f.READONLY&&p(d,{name:"ReadOnlyError"},l),(!d.keyPath&&!j&&!d.autoIncrement||d.keyPath&&(j||!e[d.keyPath]&&!d.autoIncrement||!a(e)))&&p(d,{name:"DataError"},l),d.autoIncrement){if(o&&"number"==typeof o&&o>d.__latestKey||(o=d.__latestKey+1,d.keyPath&&h(e,d.keyPath,o)),o>9007199254740992)return m(d,n,{name:"ConstraintError"});d.__latestKey=o}else d.keyPath&&(o=g(e,d.keyPath));if(b(o)||p(d,{name:"DataError"},l),k&&d.__data[o])return m(d,n,{name:"ConstraintError"});i(e)&&p(d,{name:"DataCloneError"},l);for(var q=0;q<d._indexes.length;q++){var r=d._indexes[q],s=g(e,r.keyPath);if(s)if(r.multiEntry&&s instanceof Array){for(var t={},u=0;u<s.length;u++)if(b(s[u])&&!t[s[u]]&&(t[s[u]]=s[u],r.unique&&r.__data[s[u]]))return m(d,n,{name:"ConstraintError"})}else{if(!b(s))continue;if(r.unique&&r.__data[s])return m(d,n,{name:"ConstraintError"})}}for(var w=0;w<d._indexes.length;w++){var x=d._indexes[w];if(!k)for(var y=0;y<x.__data.length;y++)for(var z=0;z<x.__data[y].length;z++)x.__data[y][z].key==j&&x.__data[y].splice(z,1);var A=g(e,x.keyPath);if(A)if(x.multiEntry&&A instanceof Array)for(var B={},C=0;C<A.length;C++)"number"!=typeof A[C]||B[A[C]]||(B[A[C]]=A[C],x.__data[A[C]]||(x.__data[A[C]]=[]),x.__data[A[C]].push({key:j,data:e}));else{if(!b(A))continue;x.__data[A]||(x.__data[A]=[]),x.__data[A].push({key:j,data:e})}}return k&&!d.__data[o]&&d.__keys.push(o),d.__data[o]=e,setTimeout(function(){n.__success(o),d.__actions.splice(d.__actions.indexOf(l),1)},c),n}function r(a,b,c){if(this.transaction.mode!==f.VERSIONCHANGE&&p(this,{name:"InvalidStateError"}),b&&b instanceof Array)for(var d=0;d<b.length;d++)""===b[d]&&p(this,{name:"InvalidStateError"});var e=new n(a,b,c,this);return this._indexes.push(e),this.indexNames.push(a),e}function s(a){this.transaction.mode!==f.VERSIONCHANGE&&p(this,{name:"InvalidStateError"});for(var b=!1,c=0;c<this.indexNames.length;c++)this.indexNames[c]===a&&(this.indexNames.splice(c,1),b=!0);b||p(this,{name:"NotFoundError"});for(var d=0;d<this._indexes.length;d++)this._indexes[d].name===a&&this._indexes.splice(d,1)}function t(a){if(this.mode!==f.VERSIONCHANGE){for(var b=!1,c=0;c<this.indexNames.length;c++)this.indexNames[c]===a&&(b=!0);b||p(this,{name:"NotFoundError"})}for(var d=0;d<this._indexes.length;d++)if(this._indexes[d].name===a)return this._indexes[d].objectStore=this,this._indexes[d];p(this,{name:"NotFoundError"})}function u(){return 0===this.__actions.length}return{get:j,add:l,put:k,createIndex:r,deleteIndex:s,index:t,__finished:u}}(),n.prototype=function(){function a(){}return{get:a}}(),o.only=function(a){if(!b(a))throw{name:"DataError"};return new o(a,a,!1,!1)},o.lowerBound=function(a,c){if(!b(a))throw{name:"DataError"};return new o(a,void 0,c?c:!1,!0)},o.upperBound=function(a,c){if(!b(a))throw{name:"DataError"};return new o(void 0,a,!0,c?c:!1)},o.bound=function(a,c,d,e){if(!b(a)||!b(c)||a>c||c===a&&e&&d)throw{name:"DataError"};return new o(a,c,d?d:!1,e?e:!1)},o.prototype=function(){function a(a){return(!this.lower||a>this.lower||a===this.lower&&!this.lowerOpen)&&(!this.upper||a<this.upper||a===this.upper&&!this.upperOpen)?!0:!1}return{inRange:a}}(),v.prototype=function(){function a(a,b){this.error=a,this.errorCode=b,this.readyState=g.done,"function"==typeof this.onerror&&this.onerror(new u(this))}function b(a){this.result=a,this.readyState=g.done,"function"==typeof this.onsuccess&&this.onsuccess(new r(this))}function c(a,b){this.readyState=g.done,"function"==typeof this.onblocked&&this.onblocked(new q("blocked",{target:this,newVersion:null,oldVersion:b}))}function d(a,b,c,d){this.result=a,this.transaction=b,this.readyState=g.done,"function"==typeof this.onupgradeneeded&&(this.onupgradeneeded(new q("upgradeneeded",{target:this,newVersion:c,oldVersion:d,returnValue:!0})),b.__commit())}return{__error:a,__success:b,__blocked:c,__upgradeneeded:d}}(),a.indexedDBmock=e,a.IDBCursormock=m,a.IDBDatabasemock=j,a.IDBTransactionmock=k,a.IDBObjectStoremock=l,a.IDBRequestmock=l,a.IDBIndexmock=n,a.IDBKeyRangemock=o,a.indexedDBmockDbs=d}(window||self);